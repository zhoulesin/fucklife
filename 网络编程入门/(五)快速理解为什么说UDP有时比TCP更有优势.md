# 有时UDP比TCP更有优势

## 网速提升给UDP稳定性提供可靠网络保障

CDN服务商Akamai报告从2008到2015--7年时间,各个国家网络平均速率耸1.5Mbps提升为5.0Mbps,网速提升近4倍.网络环境变好,网络传输的延迟,稳定性也随之改善,UDP的丢包率低于5%,如果再使用应用层重传,能够完全确保传输的可靠性.

## 对于测试结果UDP优于TCP

## TCp设计过于冗余,速度难以进一步提升

TCP为了实现网络通信的可靠性,使用了复杂的拥塞控制算法,建立了繁琐的握手过程以及重传策略.由于TCP内置在系统协议栈中,极难对其进行改进.

## UDP协议以其简单,传输快的优势,在越来越多的场景下取代了TCP

### 网页浏览

使用UDP协议有三个优点

- 能够为握手过程进行精简,减少网络通信往返次数
- 能够对TLS加解密过程进行优化
- 收发快速,无阻塞

### 流媒体

采用TCP,一旦发生丢包,TCP会将后续包缓存起来,等前面的包重传并接收到后再继续发送,延迟会越来越大.基于UDP的协议如实时音视频开源工程WebRTC是极佳的选择.

2010年google收购Global IP Solutions.获得了WebRTC技术,用于提升网页视频速率.

### 实时游戏

对实时要求较为严格的情况下,建议采用自定义的可靠UDP协议,比如Enet,RakNet等,自定义重传策略,能够把丢包产生的延迟降到最低,尽量减少网络问题对游戏性造成的影响.

采用UDP的经典游戏FPS,著名的游戏引擎Unity3D采用的也是RakNet.

### 物联网

2014google旗下的Nest建立THread Group,推出了物联网通信协议Thread,完善物联网通信.

采用UDP有3个关键点

- 网络带宽需求较小,而实时性要求高
- 大部分应用无需维持连接
- 需要低功耗

